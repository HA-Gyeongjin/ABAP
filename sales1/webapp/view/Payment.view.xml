<mvc:View
    controllerName="sync.zec.sales1.controller.Payment"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    displayBlock="true">
    <Page>
        <headerContent>
            <Bar>
                <contentMiddle>
                    <Title text="결제화면" />
                </contentMiddle>
                <contentRight>
                    <Button text="계속 쇼핑하기" press="onNavBack" type="Emphasized" />
                </contentRight>
            </Bar>
        </headerContent>

        <content>
    <Wizard id="paymentWizard" showNextButton="false">
        <WizardStep title="Items" >
            <VBox>
                <List id="itemsList" items="{paymentCart>/cartItems}">
                    <CustomListItem>
                        <HBox justifyContent="SpaceBetween" width="100%">
                            <HBox>
                            <Text text="{paymentCart>Quantity} x" />
                            <Image src="{paymentCart>Image}" width="50px" height="50px"/>
                            <VBox>
                                <Text text="{paymentCart>Maktx}" />
                            </VBox>
                            </HBox>
                            <VBox alignItems="End">
                            <ObjectNumber number="{
                                parts:[
                                    {path : 'paymentCart>Netpr'},
                                    {path : 'paymentCart>Waers'}
                                    ],
                                    type:'sap.ui.model.type.Currency',
                                    formatOptions:{showMeasure: false}
                                }"
                                numberUnit="{paymentCart>Waers}" class="sapUiNoMargin"/>
                            </VBox>
                        </HBox>
                    </CustomListItem>
                </List>
                <HBox justifyContent="SpaceBetween"  class="totalBox" alignItems="Center">
                    <Title text="총 금액 : " />
                    <!-- <Text text="{paymentCart>/totalPrice} KRW" /> -->
                    <ObjectNumber number="{
                        parts:[ 
                            {path : 'paymentCart>/totalPrice'},
                            {path : 'paymentCart>/cartItems/0/Waers'}
                        ],
                        type:'sap.ui.model.type.Currency',
                        formatOptions:{showMeasure: false}
                    }"
                    numberUnit="{paymentCart>/cartItems/0/Waers}" class="sapUiNoMargin"/>
                </HBox>
                <Button text="단계 2" press="onNextStep" />
            </VBox>
        </WizardStep>
        <WizardStep id="paymentTypeStep" title="Payment Type">
            <VBox>
                <Text text="Please select your payment method:" />
                <RadioButtonGroup
            id="paymentTypeGroup"
            columns="2"
            selectedIndex="{paymentCart>/selectedIndex}"
			select="onPaymentTypeSelect" >
                    <buttons>
                        <RadioButton text="Card" />
                        <RadioButton text="KakaoPay" />
                    </buttons>
                </RadioButtonGroup>
            </VBox>
            <Button text="단계 3" press="onNextStep" />
        </WizardStep>

		<WizardStep
			id="cardInfoStep"
			title="{i18n>checkoutCreditCardCreditCardInfo}"
			nextStep="invoiceStep"
			activate=".onCheckStepActivation"
			icon="sap-icon://credit-card"
			validated="false"
			visible="{paymentCart>/showCardInfo}">
		<f:SimpleForm
			editable="true"
			layout="ResponsiveGridLayout">
			<Label
				labelFor="creditCardHolderName"
				text="{i18n>checkoutCreditCardName}"
				required="true">
				<layoutData>
					<l:GridData span="XL4 L4 M4 S12"/>
				</layoutData>
			</Label>
			<Input
				id="creditCardHolderName"
				placeholder="{i18n>creditCardHolderText}"
				value="{
					path: '/CreditCard/Name',
					type: 'sap.ui.model.type.String',
					constraints: {
						minLength: 2,
					search: '^[a-zA-Z가-힣]+$'
					}	
				}"
				valueStateText="이름은 최소 2자리 이상이어야 하며, 숫자나 특수문자를 포함할 수 없습니다."
				change="checkCardHolderName">
				<layoutData>
					<l:GridData span="XL8 L8 M8 S12"/>
				</layoutData>
			</Input>
			<Label
				text="{i18n>checkoutCreditCardCardNo}"
				labelFor="creditCardNumber"
				required="true">
				<layoutData>
					<l:GridData span="XL4 L4 M4 S12"/>
				</layoutData>
			</Label>
			<MaskInput
				id="creditCardNumber"
				placeholder="{i18n>creditCardNumberText}"
				mask="CCCC-CCCC-CCCC-CCCC"
				placeholderSymbol="_"
				value="{
					path: '/CreditCard/CardNumber',
					type: 'sap.ui.model.type.String',
					constraints: {
						search: '^[0-9-]+$',
						minLength: 19
					}
				}"
				change="checkCardNumber">
				<rules>
					<MaskInputRule
						maskFormatSymbol="C"
						regex="[0-9]"/>
				</rules>
				<layoutData>
					<l:GridData span="XL8 L8 M8 S12"/>
				</layoutData>
			</MaskInput>
			<Label
				text="{i18n>checkoutCreditCardCode}"
				labelFor="creditCardSecurityNumber"
				required="true">
				<layoutData>
					<l:GridData span="XL4 L4 M4 S12"/>
				</layoutData>
			</Label>
			<MaskInput
				id="creditCardSecurityNumber"
				placeholder="{i18n>creditCardSecurityNumberText}"
				mask="CCC"
				placeholderSymbol="_"
				value="{
					path: '/CreditCard/SecurityCode',
					type: 'sap.ui.model.type.String',
					constraints: {
						minLength: 3,
						search: '^[0-9]+$'
					}
				}"
				change="checkSecurityCode">
				<rules>
					<MaskInputRule
						maskFormatSymbol="C"
						regex="[0-9]"/>
				</rules>
				<layoutData>
					<l:GridData span="XL8 L8 M8 S12"/>
				</layoutData>
			</MaskInput>
			<Label text="{i18n>checkoutCreditCardExpiration}">
				<layoutData>
					<l:GridData span="XL4 L4 M4 S12"/>
				</layoutData>
			</Label>
			<DatePicker
				id="creditCardExpirationDate"
				value="{
					path: '/CreditCard/Expire',
					type: 'sap.ui.model.type.String',
					constraints: {
						minLength: 7,
						maxLength: 7
					}
				}"
				valueFormat="MM/YYYY"
				displayFormat="MM/YYYY"
				required="true"
				change="checkExpirationDate">
				<layoutData>
					<l:GridData span="XL8 L8 M8 S12"/>
				</layoutData>
			</DatePicker>
		</f:SimpleForm>
	</WizardStep>

						<!-- <Button text="Submit" press="onSubmit" /> -->
            
        <WizardStep title="Review">
            <!-- Your content for review -->
            <Button text="Complete" press="onComplete" />
        </WizardStep>
    </Wizard>
</content>
</Page>
</mvc:View>
